<h1>Spending Summary by Transaction Direction</h1>

<div class="summary_type_navbar">
  <%= link_to "By Day", summaries_by_transaction_direction_path + "?averaging_time=day&display=#{@show_table? "table" : "chart"}#{@params_for_link_url}", {class: mark_current_tab(@averaging_time,"day")} %>
  <%= link_to "By Month", summaries_by_transaction_direction_path + "?averaging_time=month&display=#{@show_table? "table" : "chart"}#{@params_for_link_url}", {class: mark_current_tab(@averaging_time,"month")} %>
  <%= link_to "By Year", summaries_by_transaction_direction_path + "?averaging_time=year&display=#{@show_table? "table" : "chart"}#{@params_for_link_url}", {class: mark_current_tab(@averaging_time,"year")} %>
  <%= link_to "By Account", summaries_by_account_path + "?averaging_time=#{@averaging_time}&display=#{@show_table? "table" : "chart"}#{@params_for_link_url}"%>
  <%= link_to "By Category", summaries_by_category_path + "?averaging_time=#{@averaging_time}&display=#{@show_table? "table" : "chart"}#{@params_for_link_url}"%>
</div>
<div class="summary_type_navbar">
  <%= link_to "Table", summaries_by_transaction_direction_path + "?display=table&averaging_time=#{@averaging_time}&#{@params_for_link_url}", {class: mark_current_tab(@show_table,true)} %>
  <%= link_to "Chart", summaries_by_transaction_direction_path + "?display=chart&averaging_time=#{@averaging_time}&#{@params_for_link_url}", {class: mark_current_tab(@show_table,false)} %>
</div>

<div class="filter">
  <%= form_tag request.path, method: 'get' do %>
    <div class="field number">
      <%= label_tag :year %>
      <%= number_field_tag :year, params[:year] %>
    </div>
    <div class="field number">
      <%= label_tag :month %>
      <%= number_field_tag :month, params[:month] %>
    </div>
    <div class="field number">
      <%= label_tag :day %>
      <%= number_field_tag :day, params[:day] %>
    </div>
    <div class="actions">
      <%= submit_tag "Search" %>
      <%= hidden_field_tag :averaging_time, params[:averaging_time] %>
      <%= hidden_field_tag :display, params[:display] %>
    </div>
  <% end %>
</div>

<% if @show_table %>
  <%= render 'table' %>
<% else %>
  <%= render 'chart' %>
<% end %>